/* =========================================================
   StreamFlix – GLOBAL
   - Reset, variables, thèmes
   - Header, nav, boutons, cartes génériques
   - Footer, helpers
   - Breakpoints globaux
========================================================= */

/* Reset minimal */
*,
*::before,
*::after { box-sizing: border-box; }
html, body { height: 100%; }
body { margin: 0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
img, picture, video, canvas { display: block; max-width: 100%; }
button, input, select, textarea { font: inherit; }
a { color: inherit; text-decoration: none; }
:focus-visible { outline: 2px solid var(--accent-2); outline-offset: 2px; }

/* Variables + thèmes */
:root {
  --fs-0: clamp(.94rem, .88rem + .30vw, 1rem);
  --fs-1: clamp(1.10rem, .95rem + .70vw, 1.25rem);
  --fs-2: clamp(1.35rem, 1.05rem + 1.50vw, 1.6rem);
  --fs-3: clamp(1.70rem, 1.10rem + 2.50vw, 2.2rem);
  --fs-4: clamp(2.20rem, 1.20rem + 4.00vw, 3rem);

  --space-1: .5rem;
  --space-2: .75rem;
  --space-3: 1rem;
  --space-4: 1.5rem;
  --space-5: 2rem;
  --space-6: 3rem;

  --bg: #0b0b0f;
  --bg-elev: #0f1117;
  --bg-muted: #12131a;
  --text: #e6e6e9;
  --text-muted: #a3a4ad;
  --accent: #e50914;
  --accent-2: #ffb703;
  --card: #141822;
  --border: #24283b;

  --shadow-sm: 0 1px 2px rgba(0,0,0,.15);
  --shadow-md: 0 6px 18px rgba(0,0,0,.2);
  --shadow-lg: 0 16px 40px rgba(0,0,0,.35);

  --max-w: 1400px;
  --header-h: 56px;
  --header-h-scrolled: 48px;

  --poster-w: 42vw;
  --poster-w-sm: 32vw;
  --poster-w-md: 22vw;
  --poster-w-lg: 16.6vw;
  --poster-w-xl: 14vw;

  --dur-fast: 120ms;
  --dur-mid: 260ms;
  --dur-slow: 480ms;
  --ease: cubic-bezier(.22,.61,.36,1);
}
html[data-theme="light"]{
  --bg:#f9fafb; --bg-elev:#fff; --bg-muted:#f1f5f9;
  --text:#0b0b0f; --text-muted:#475569; --card:#fff; --border:#e5e7eb;
}
html[data-theme="sepia"]{
  --bg:#0b0a09; --bg-elev:#14110f; --bg-muted:#1a1613;
  --text:#f2e8d5; --text-muted:#cbb69a; --accent:#d97706; --accent-2:#f59e0b;
  --card:#1a1613; --border:#2a241f;
}

/* Helpers / Layout */
.container { width: min(100% - 2rem, var(--max-w)); margin-inline: auto; }
.sr-only { position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0; }
.page { background: var(--bg); color: var(--text); }

/* Header sticky */
.site-header{
  position: sticky; top:0; z-index:50;
  height: var(--header-h);
  display: grid; align-items: center;
  background: linear-gradient(180deg, rgba(0,0,0,.75), rgba(0,0,0,.2) 60%, rgba(0,0,0,0));
  backdrop-filter: blur(6px);
  transition: height var(--dur-mid) var(--ease), background var(--dur-mid) var(--ease), box-shadow var(--dur-mid) var(--ease);
}
.page--detail .site-header { background: rgba(0,0,0,.35); }
.page.is-scrolled .site-header, .site-header.is-collapsed {
  height: var(--header-h-scrolled); background: rgba(0,0,0,.65); box-shadow: var(--shadow-sm);
}

.header__inner{
  display:grid; grid-template-columns:auto 1fr auto; gap:var(--space-2); align-items:center;
}
.brand{ display:inline-flex; align-items:center; gap:.5rem; font-weight:800; letter-spacing:.3px; }
.brand__mark{ color:var(--accent); font-size:1.1rem; transform: translateY(-1px); }
.brand__name{ font-family: Unbounded, Inter, sans-serif; font-size:1.1rem; text-transform:uppercase; }

.nav{ display:none; gap:1rem; }
.nav__link{ color:var(--text-muted); font-size:.95rem; transition: color var(--dur-fast) var(--ease); }
.nav__link:hover, .nav__link.is-active{ color:var(--text); }

.header-actions{ display:inline-flex; align-items:center; gap:.5rem; }
.search{ display:inline-flex; align-items:center; gap:.25rem; background:var(--bg-elev); border:1px solid var(--border); padding:.25rem .5rem; border-radius:.75rem; }
.search__input{ border:0; background:transparent; color:var(--text); width:10ch; }

.btn{ cursor:pointer; border:1px solid transparent; border-radius:.75rem; padding:.6rem .9rem; font-weight:600; transition: transform var(--dur-fast) var(--ease), background var(--dur-fast) var(--ease), border-color var(--dur-fast) var(--ease), box-shadow var(--dur-fast) var(--ease); }
.btn:hover{ transform: translateY(-1px); }
.btn:active{ transform: translateY(0); }
.btn--primary{ background:var(--accent); color:#fff; box-shadow:var(--shadow-sm); }
.btn--primary:hover{ box-shadow:var(--shadow-md); }
.btn--ghost{ background: rgba(255,255,255,.06); border-color: var(--border); }
.btn--icon{ background: var(--bg-elev); border-color: var(--border); padding:.5rem; }
.icon{ display:inline-block; line-height:1; }

.avatar{ padding:0; border:0; background:transparent; border-radius:999px; overflow:hidden; width:36px; height:36px; }
.avatar img{ width:100%; height:100%; object-fit:cover; }
.only-desktop{ display:none; }

/* Cartes génériques (utilisées sur les deux pages) */
.card{
  position:relative; border-radius:.8rem; overflow:hidden; background:var(--card); border:1px solid var(--border);
  box-shadow:0 0 0 rgba(0,0,0,0); transform-origin:center; transition: transform var(--dur-mid) var(--ease), box-shadow var(--dur-mid) var(--ease), filter var(--dur-mid) var(--ease);
  will-change: transform; perspective:800px;
}
.card__media img{ width:100%; height:auto; aspect-ratio:16/9; object-fit:cover; display:block; }
.card:hover{ transform: translateY(-3px) rotateY(.8deg); box-shadow: var(--shadow-md); filter: saturate(1.05); }
/* Progress bar (visible sur index, OK en global) */
.card__progress{ position:absolute; left:0; right:0; bottom:0; height:4px; background: rgba(255,255,255,.15); }
.card__progress::after{ content:""; display:block; height:100%; width:var(--progress,0%); background:var(--accent); }
/* Rank simple */
.card--ranked{ isolation:isolate; }
.card__rank{
  position:absolute; inset:auto auto .25rem .25rem; z-index:1; font-weight:800; font-size:2.1rem; line-height:1;
  -webkit-text-stroke:6px rgba(0,0,0,.5); text-shadow: 0 2px 12px rgba(0,0,0,.7);
}

/* Footer */
.site-footer{ padding-block: var(--space-5); color: var(--text-muted); }
.footer__inner{ display:grid; gap:var(--space-2); }
.footer__nav{ display:flex; flex-wrap:wrap; gap:.75rem 1rem; }
.footer__nav a{ color: var(--text-muted); }
.footer__nav a:hover{ color: var(--text); }
.footer__copy{ margin:0; }

/* Breakpoints globaux (nav, header utils) */
@media (min-width: 480px){
  .nav{ display:flex; }
  .search__input{ width:14ch; }
}
@media (min-width: 640px){
  .only-desktop{ display:inline-flex; }
}
